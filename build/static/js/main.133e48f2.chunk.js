(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),r=t.n(c),u=t(3),a=t(2),i=t(4),o=t.n(i),s="/api/persons",l={getAll:function(){return o.a.get(s).then((function(e){return e.data}))},create:function(e){return o.a.post(s,e).then((function(e){return e.data}))},remove:function(e){return o.a.delete("".concat(s,"/").concat(e.id)).then((function(e){return e.data}))},update:function(e,n){return o.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))}},d=t(0),f=function(e){var n=e.persons,t=e.setter;return n.map((function(e){return Object(d.jsx)(j,{person:e,setter:t},e.name)}))},j=function(e){var n=e.person,t=e.setter;return Object(d.jsxs)("p",{children:[n.name," ",n.number," ",Object(d.jsx)("button",{onClick:function(){return t(n)},children:"delete"})]})},b=function(e){var n=e.filter,t=e.filterchange;return Object(d.jsxs)("div",{children:["filter shown with ",Object(d.jsx)("input",{value:n,onChange:t})]})},m=function(e){var n=e.submit,t=e.name,c=e.namechange,r=e.number,u=e.numberchange;return Object(d.jsxs)("form",{onSubmit:n,children:[Object(d.jsxs)("div",{children:["name: ",Object(d.jsx)("input",{value:t,onChange:c})]}),Object(d.jsxs)("div",{children:["number: ",Object(d.jsx)("input",{value:r,onChange:u})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){var n=e.message;return null===n?null:Object(d.jsx)("div",{className:"message",children:n})},O=function(e){var n=e.message;return null===n?null:Object(d.jsx)("div",{style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n})},p=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],r=Object(a.useState)(""),i=Object(u.a)(r,2),o=i[0],s=i[1],j=Object(a.useState)(""),p=Object(u.a)(j,2),v=p[0],g=p[1],x=Object(a.useState)(""),w=Object(u.a)(x,2),S=w[0],y=w[1],k=Object(a.useState)(null),C=Object(u.a)(k,2),T=C[0],A=C[1],D=Object(a.useState)(null),B=Object(u.a)(D,2),E=B[0],I=B[1];Object(a.useEffect)((function(){l.getAll().then((function(e){c(e)}))}),[]);var J=t.filter((function(e){return e.name.toLowerCase().includes(S)}));return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Phonebook"}),Object(d.jsx)(h,{message:T}),Object(d.jsx)(O,{message:E}),Object(d.jsx)(b,{filter:S,filterchange:function(e){y(e.target.value)}}),Object(d.jsx)("h3",{children:"add a new"}),Object(d.jsx)(m,{submit:function(e){e.preventDefault();var n=t.some((function(e){return e.name===o})),r={name:o,number:v};if(n){if(window.confirm("".concat(o," is already added to the phonebook, replace the old number with a new one?"))){var u=t.find((function(e){return e.name===o}));l.update(u.id,r).then((function(e){c(t.map((function(n){return n.id!==e.id?n:e}))),s(""),g(""),A("Updated ".concat(e.name)),setTimeout((function(){A(null)}),5e3)})).catch((function(e){I("Information of ".concat(r.name," has already been removed from server")),setTimeout((function(){I(null)}),5e3),c(t.filter((function(e){return e.id!==u.id}))),s(""),g("")}))}}else l.create(r).then((function(e){c(t.concat(e)),s(""),g(""),A("Added ".concat(e.name)),setTimeout((function(){A(null)}),5e3)}))},name:o,namechange:function(e){s(e.target.value)},number:v,numberchange:function(e){g(e.target.value)}}),Object(d.jsx)("h3",{children:"Numbers"}),Object(d.jsx)(f,{persons:J,setter:function(e){window.confirm("Delete ".concat(e.name,"?"))&&l.remove(e).then((function(){c(t.filter((function(n){return n.id!==e.id}))),A("Deleted ".concat(e.name)),setTimeout((function(){A(null)}),5e3)}))}})]})};t(38);r.a.render(Object(d.jsx)(p,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.133e48f2.chunk.js.map