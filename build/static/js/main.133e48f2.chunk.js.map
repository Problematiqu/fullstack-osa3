{"version":3,"sources":["services/communication.js","App.js","index.js"],"names":["baseUrl","communication","getAll","axios","get","then","response","data","create","newPerson","post","remove","removedPerson","delete","id","update","updatedPerson","put","DisplayAll","persons","setter","map","person","name","DisplayPerson","number","onClick","Filter","filter","filterchange","value","onChange","Form","submit","namechange","numberchange","onSubmit","type","Notification","message","className","ErrorNotification","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","setMessage","errorMessage","setErrorMessage","useEffect","receivedPersons","filteredPersons","toLowerCase","includes","event","target","preventDefault","nameAlreadyExists","some","toBeAdded","window","confirm","existing","find","setTimeout","catch","error","addedPerson","concat","per","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.133e48f2.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = newPerson => {\n    const request = axios.post(baseUrl, newPerson) \n    return request.then(response => response.data)\n}\n\nconst remove = removedPerson => {\n    const request = axios.delete(`${baseUrl}/${removedPerson.id}`)\n    return request.then(response => response.data)\n}\n\nconst update = (id, updatedPerson) => {\n    const request = axios.put(`${baseUrl}/${id}`, updatedPerson)\n    return request.then(response => response.data)\n}\n\nconst communication = { getAll, create, remove, update}\n\nexport default communication","import React, { useEffect, useState } from 'react'\nimport communication from './services/communication.js'\n\nconst DisplayAll = ({ persons, setter }) => {\n  return persons.map(person => <DisplayPerson key={person.name} person={person} setter={setter} />)\n}\n\nconst DisplayPerson = ({ person, setter }) => {\n\n  return <p>{person.name} {person.number} <button onClick={() => setter(person)}>delete</button></p>\n}\n\nconst Filter = ({ filter, filterchange} ) => {\n  return (\n    <div>\n      filter shown with <input\n        value={filter}\n        onChange={filterchange} \n      />\n    </div>\n  )\n}\n\nconst Form = ({submit, name, namechange, number, numberchange}) => {\n  return (\n    <form onSubmit={submit}>\n      <div>\n        name: <input \n          value={name}\n          onChange={namechange} \n        />\n      </div>\n      <div>\n        number: <input \n          value={number}\n          onChange={numberchange}\n        />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className='message'>\n      {message}\n    </div>\n  )\n}\n\nconst ErrorNotification = ({ message }) => {\n  const errorStyle = {\n    color: 'red',\n    background: 'lightgrey',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10\n  }\n\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div style={errorStyle}>\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName ] = useState('')\n  const [newNumber, setNewNumber ] = useState('')\n  const [newFilter, setNewFilter ] = useState('')\n  const [message, setMessage] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  useEffect(() => {\n    communication \n      .getAll() \n      .then(receivedPersons => {\n        setPersons(receivedPersons)\n      })\n  }, [])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const nameAlreadyExists = persons.some(person => person.name === newName)\n    const toBeAdded = {name: newName, number: newNumber}\n\n    if (nameAlreadyExists) {\n      if (window.confirm(`${newName} is already added to the phonebook, replace the old number with a new one?`)) {\n        const existing = persons.find(person => person.name === newName)\n        communication\n          .update(existing.id, toBeAdded)\n          .then(updatedPerson => {\n            setPersons(persons.map(person => person.id !== updatedPerson.id ? person : updatedPerson))\n            setNewName('')\n            setNewNumber('')\n            setMessage(`Updated ${updatedPerson.name}`)\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n          })\n          .catch(error => {\n            setErrorMessage(`Information of ${toBeAdded.name} has already been removed from server`)\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000)\n            setPersons(persons.filter(person => person.id !== existing.id))\n            setNewName('')\n            setNewNumber('')\n          })\n      }\n    } else {         \n      communication \n        .create(toBeAdded)\n        .then(addedPerson => {\n          setPersons(persons.concat(addedPerson))\n          setNewName('')\n          setNewNumber('')\n          setMessage(`Added ${addedPerson.name}`)\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n        })\n    }\n  }\n\n  const handleNameChange = event => {    \n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = event => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = event => {\n    setNewFilter(event.target.value)\n  }\n\n  const handleDelete = (person) => {\n    if (window.confirm(`Delete ${person.name}?`)) {\n      communication \n        .remove(person)\n        .then(() => {\n          setPersons(persons.filter(per => per.id !== person.id))\n          setMessage(`Deleted ${person.name}`)\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)          \n        })\n    }\n  }\n\n  const filteredPersons = persons.filter(person => {\n    const lowercase = person.name.toLowerCase()\n    return (lowercase.includes(newFilter)\n  )})\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message}/>\n      <ErrorNotification message={errorMessage}/>\n      <Filter filter={newFilter} filterchange={handleFilterChange} />\n      <h3>add a new</h3>\n      <Form submit={addPerson} name={newName} namechange={handleNameChange} number={newNumber} numberchange={handleNumberChange}/>\n      <h3>Numbers</h3>\n      <DisplayAll persons={filteredPersons} setter={handleDelete} />\n    </div>\n  )\n\n}\n\nexport default App","import ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}